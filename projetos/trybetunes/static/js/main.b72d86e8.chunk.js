(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{65:function(e,t,a){e.exports=a(82)},70:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),i=a.n(c),s=(a(70),a(6)),l=a(7),o=a(10),u=a(9),m=a(28),d=(a(58),a(89)),p=a(91),f=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{"data-testid":"header-component"},r.a.createElement(d.a,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",className:"justify-content-center mb-1"},r.a.createElement(p.a,{justify:!0,variant:"pills"},r.a.createElement(p.a.Item,null,r.a.createElement(p.a.Link,{"data-testid":"link-to-search",as:m.b,to:{pathname:"/search"}},"Pesquisa")),r.a.createElement(p.a.Item,null,r.a.createElement(p.a.Link,{"data-testid":"link-to-favorites",as:m.b,to:{pathname:"/favorites"}},"Favoritos")),r.a.createElement(p.a.Link,{as:m.b,"data-testid":"link-to-profile",to:{pathname:"/profile"}},"Perfil"))))}}]),a}(n.Component),h=a(13),b=a(12),v=a.n(b),E=a(18),g=a(84),k=a(90),O=a(85),j=a(51),y=a.n(j),N=a(1),S=function(e){return localStorage.setItem("user",JSON.stringify(e))},C=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},w=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem("user"));null===t&&(t={}),C(t)(e)}))},x=function(e){return new Promise((function(t){S(Object(N.a)(Object(N.a)({},{name:"",email:"",image:"",description:""}),e)),C("OK")(t)}))},L=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target;e.setState({isDisabled:!0});var n=a.value;e.setState({input:n}),n.length>=3&&e.setState({isDisabled:!1})},e.handleClickLogin=function(){var t=Object(E.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),a.preventDefault(),n=e.state.input,t.next=5,x({name:n});case 5:e.setState({redirect:!0});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={isDisabled:!0,input:"",isLoading:!1,redirect:!1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isDisabled,a=e.input,n=e.isLoading,c=e.redirect,i=this.handleChange,s=this.handleClickLogin;return r.a.createElement("div",{"data-testid":"page-login"},r.a.createElement(g.a,null,c&&r.a.createElement(h.a,{to:{pathname:"/search"}}),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{type:"spokes",color:"blue",height:"20%",width:"20%"}),r.a.createElement("p",null,"Carregando...")):r.a.createElement(k.a,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Usu\xe1rio"),r.a.createElement(k.a.Control,{value:a,onChange:i,"data-testid":"login-name-input",placeholder:"Nome de Usu\xe1rio"}),r.a.createElement(O.a,{type:"submit",onClick:s,disabled:t,"data-testid":"login-submit-button"},"Entrar")))))}}]),a}(n.Component),I=a(86),D=a(64),P=a(87),U=a(92),F=function(){var e=Object(E.a)(v.a.mark((function e(t){var a,n,r,c,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,i=c.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,{type:"spokes",color:"blue",height:"20%",width:"20%"}),r.a.createElement("p",null,"Carregando..."))}}]),a}(n.Component),T=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleClick=function(){var t=Object(E.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.input,a.preventDefault(),e.setState({isRequisitionDone:!1}),t.next=5,F(n);case 5:r=t.sent,e.setState({isDisabled:!0,isRequisitionDone:!0,artistAlbums:r,artistName:n,input:""});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target;e.setState({isDisabled:!0});var n=a.value;e.setState({input:n}),n.length>=2&&e.setState({isDisabled:!1})},e.state={input:"",artistName:"",isDisabled:!0,artistAlbums:[],isRequisitionDone:!0},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.handleChange,t=this.handleClick,a=this.state,n=a.input,c=a.isDisabled,i=a.isRequisitionDone,s=a.artistAlbums,l=a.artistName;return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(g.a,{className:"mb-3"},r.a.createElement(k.a,null,r.a.createElement(I.a,{className:"align-items-center"},r.a.createElement(D.a,null,r.a.createElement(k.a.Control,{value:n,onChange:e,"data-testid":"search-artist-input",placeholder:"nome do artista"})),r.a.createElement(D.a,{xs:"auto"},r.a.createElement(O.a,{type:"submit",onClick:t,disabled:c,"data-testid":"search-artist-button"},"Pesquisar"))))):r.a.createElement(M,null),r.a.createElement(g.a,{fluid:"sm"},0!==s.length?r.a.createElement("div",null,r.a.createElement(P.a,{variant:"success"},"Resultado de \xe1lbuns de: ".concat(l)),r.a.createElement(I.a,null,s.map((function(e){return r.a.createElement(D.a,{key:e.collectionId},r.a.createElement(U.a,{style:{width:"18rem"}},r.a.createElement(U.a.Img,{variant:"top",src:e.artworkUrl100}),r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null,e.collectionName),r.a.createElement(U.a.Text,null,e.artistName),r.a.createElement(O.a,{"data-testid":"link-to-album-".concat(e.collectionId),variant:"primary",as:m.b,to:{pathname:"/album/".concat(e.collectionId)}},"Ir para as m\xfasicas"))))})))):r.a.createElement(P.a,{variant:"danger"},"Nenhum \xe1lbum foi encontrado")))}}]),a}(n.Component),J=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getUserName=Object(E.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,w();case 3:return a=t.sent,e.setState({isLoading:!1}),t.abrupt("return",e.setState({userName:a.name}));case 6:case"end":return t.stop()}}),t)}))),e.state={userName:"",isLoading:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserName()}},{key:"render",value:function(){var e=this.state,t=e.userName,a=e.isLoading;return r.a.createElement("div",{"data-testid":"page-search"},a?r.a.createElement(M,null):r.a.createElement("h2",{"data-testid":"header-user-name"},t),r.a.createElement(T,null))}}]),a}(n.Component),A=a(88),q=function(){var e=Object(E.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=a(53);JSON.parse(localStorage.getItem("favorite_songs"))||localStorage.setItem("favorite_songs",JSON.stringify([]));var _=function(){return JSON.parse(localStorage.getItem("favorite_songs"))},B=function(e){return localStorage.setItem("favorite_songs",JSON.stringify(e))},K=function(e){return function(t){setTimeout((function(){t(e)}),500)}},G=function(e){return new Promise((function(t){if(e){var a=_();B([].concat(Object(R.a)(a),[e]))}K("OK")(t)}))},z=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).isChecked=function(){var t=e.props,a=t.favoriteList,n=t.music;e.setState({checked:a.some((function(e){return e.trackId===n.trackId}))})},e.addSongToFavorite=function(){var t=Object(E.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,G(a);case 3:e.setState({isLoading:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target.checked,n=e.props.music;console.log(a),a?(e.setState({checked:!0}),e.addSongToFavorite(n)):e.setState({checked:!1})},e.state={checked:!1,isLoading:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.isChecked()}},{key:"render",value:function(){var e=this.props.music,t=this.state,a=t.checked,n=t.isLoading,c=this.handleChange;return n?r.a.createElement(M,null):r.a.createElement(U.a,null,r.a.createElement(I.a,null,r.a.createElement(U.a.Title,{variant:"top"},e.trackName),r.a.createElement("audio",{"data-testid":"audio-component",src:e.previewUrl,controls:!0},r.a.createElement("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",r.a.createElement("code",null,"audio"))),r.a.createElement(I.a,null,r.a.createElement(k.a,null,r.a.createElement(D.a,null,r.a.createElement(k.a.Check,{checked:a,onChange:c,type:"checkbox",label:"Favorita","data-testid":"checkbox-music-".concat(e.trackId)})))))}}]),a}(n.Component),H=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).loadFavoriteSongs=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({isLoading:!0},Object(E.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){var t=_();K(t)(e)}));case 2:a=t.sent,e.setState({isLoading:!1,favoriteList:a});case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),e.getAlbumMusics=Object(E.a)(v.a.mark((function t(){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match,t.next=3,q(a.params.id);case 3:return n=t.sent,t.abrupt("return",e.setState({albumMusics:n,artistName:n[0].artistName,albumName:n[0].collectionName,img:n[0].artworkUrl100}));case 5:case"end":return t.stop()}}),t)}))),e.state={albumMusics:[],artistName:"",albumName:"",img:"",isLoading:!1,favoriteList:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getAlbumMusics(),this.loadFavoriteSongs()}},{key:"render",value:function(){var e=this.state,t=e.albumMusics,a=e.artistName,n=e.albumName,c=e.img,i=e.isLoading,s=e.favoriteList,l=this.addSongToFavorite;return i?r.a.createElement(M,null):r.a.createElement(g.a,{"data-testid":"page-album"},r.a.createElement(I.a,{className:"justify-content-center"},r.a.createElement(D.a,{md:"auto"},r.a.createElement("h1",null,r.a.createElement(A.a,{"data-testid":"artist-name"},a)))),r.a.createElement(I.a,{className:"justify-content-center"},r.a.createElement(D.a,{md:"auto"},r.a.createElement("h2",null,r.a.createElement(A.a,{"data-testid":"album-name"},n)))),r.a.createElement(I.a,{className:"justify-content-center"},r.a.createElement(D.a,{md:"auto"},r.a.createElement(U.a,{style:{width:"18rem"}},r.a.createElement(U.a.Img,{src:c}))),r.a.createElement(D.a,{md:"auto"},r.a.createElement(U.a,{style:{width:"18rem"}},t.map((function(e,a){return 0!==a&&r.a.createElement(z,{favorite:function(){return l(t[a])},previewUrl:e.previewUrl,key:e.trackName,trackName:e.trackName,trackId:e.trackId,music:e,favoriteList:s})}))))))}}]),a}(n.Component),Q=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"page-favorites"},"Favorites")}}]),a}(n.Component),V=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"page-profile"},"Profile")}}]),a}(n.Component),W=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"page-profile-edit"},"Profile Edit")}}]),a}(n.Component),X=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"page-not-found"},"Page Not Found")}}]),a}(n.Component),Y=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:L}),r.a.createElement(h.b,{exact:!0,path:"/search"},r.a.createElement(J,null)),r.a.createElement(h.b,{exact:!0,path:"/album/:id",component:H}),r.a.createElement(h.b,{exact:!0,path:"/favorites"},r.a.createElement(Q,null)),r.a.createElement(h.b,{exact:!0,path:"/profile"},r.a.createElement(V,null)),r.a.createElement(h.b,{exact:!0,path:"/profile/edit"},r.a.createElement(W,null)),r.a.createElement(h.b,{exact:!0,path:"*",component:X}))}}]),a}(r.a.Component),Z=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(f,null),r.a.createElement(Y,null))}}]),a}(r.a.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.b72d86e8.chunk.js.map